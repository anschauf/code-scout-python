version: "3.8"

services:
  code_scout_python:
    build:
      context: .
      dockerfile: Dockerfile_PAOLO
      args:
        AWS_ACCESS_KEY_ID: $AWS_ACCESS_KEY_ID
        AWS_SECRET_ACCESS_KEY: $AWS_SECRET_ACCESS_KEY
        AWS_REGION: $AWS_REGION
        AIMEDIC_GROUPER_VERSION: $AIMEDIC_GROUPER_VERSION

    volumes:
      - type: bind
        source: "${PWD}"
        target: /home/jovyan/work

    ports:
      - "8888:8888"

    command: >
       sh -c "
        mv /tmp/jars/aimedic-grouper-assembly.jar /home/jovyan/work/resources/jars &&
        '/usr/local/bin/start.sh' jupyter lab --ServerApp.token=''"
